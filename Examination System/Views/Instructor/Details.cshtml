@model Examination_System.ViewModels.InstructorDetailsViewModel
@{
    ViewData["Title"] = "Instructor Details";
}

@section Style {
    <style>
        .card {
            border: none;
            border-radius: 15px;
            background-color: white;
            transition: all 0.3s ease;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            position: relative;
        }

        .card-body.instructor {
            display: flex;
            max-height: 35vh;
            position: relative;
            flex-direction: column;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px #161A30;
        }

        .btn-primary {
            background: #31304D;
            border: solid 1px #161A30;
            padding: 0.8rem 1.5rem;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 15px;
            position: relative;
            overflow: hidden;
        }

        .form-control:focus {
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
            margin-bottom: .5rem;
        }

        .search-btn-primary {
            background: #31304D;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 10px;
            position: relative;
            overflow: hidden;
        }

            .search-btn-primary:hover {
                transform: translateY(-2px);
                background: #161A30;
                color: white;
                box-shadow: 0 4px 15px #31304D;
            }


        .btn-primary:hover {
            transform: translateY(-2px);
            background: #161A30;
            box-shadow: 0 4px 15px #31304D;
        }

        .btn-danger {
            border: none;
            padding: 0.8rem 1.5rem;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 15px;
            position: relative;
            overflow: hidden;
        }

        .btn-success {
            background: #31304D;
            font-size: 15px;
        }

            .btn-success:hover {
                background: #161A30;
                color: white;
                box-shadow: 0 4px 15px #31304D;
            }

        .course-card {
            width: 500px;
            margin-bottom: 1.5rem;
        }

            .course-card h4 {
                color: #31304D;
                border-bottom: 2px solid #e2e8f0;
                padding-bottom: 0.5rem;
                margin-bottom: 1rem;
            }

        .course-assigned {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

            .course-assigned .row {
                width: 100%;
                justify-content: center;
            }

        .available-course button {
            width: 100%;
        }

        .available-courses {
            display: flex;
            max-height: 35vh;
            overflow-y: auto;
            position: relative;
            flex-direction: column;
        }

            .available-courses:before,
            .available-courses:after {
                content: "";
                position: sticky;
                height: 30px;
                left: 0;
                right: 0;
                z-index: 1;
            }

            .available-courses:before {
                top: 0;
                background: #F0ECE5;
            }

            .available-courses:after {
                bottom: 0;
                background: linear-gradient(to top, rgba(255, 255, 255, 0.95) 10%, transparent);
            }

        .available-course {
            transition: transform 0.2s ease;
        }

            .available-course:hover {
                color: #161A30;
                transform: translateX(5px);
            }

        .student-count {
            background: #31304D;
            color: rgb(243, 236, 236);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        h1,
        h4 {
            color: #161A30;
            font-weight: 600;
        }

        .card-title {
            color: #2d1744 !important;
            font-weight: 700 !important;
        }

        .course-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .btn-filter {
            background: #161A30 !important;
            border-radius: 20px !important;
            padding: 0.5rem 1.2rem !important;
            transition: all 0.2s ease;
        }

            .btn-filter.active {
                background: #161A30 !important;
                color: white !important;
            }

        .empty-state {
            text-align: center;
            padding: 2rem;
            opacity: 0.7;
            color: #4a5568;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .btn-primary:focus,
        .card:focus-within {
            outline: 3px solid #161A30;
            outline-offset: 2px;
        }

        .available-courses::-webkit-scrollbar {
            width: 8px;
        }

        .available-courses::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .available-courses::-webkit-scrollbar-thumb {
            background: #161A30;
            border-radius: 10px;
        }

        @@media(max - width:950px) or (max-height:620px) {
            .card-body.instructor

        {
            overflow-y: auto;
        }

        }

        .card-body.instructor::-webkit-scrollbar {
            width: 8px;
        }

        .card-body.instructor::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .card-body.instructor::-webkit-scrollbar-thumb {
            background: #161A30;
            border-radius: 10px;
        }

    </style>
}

<div class="container mt-5">
    <h1 class="display-4 mb-4">Instructor Details</h1>
    <div class="row">
        <!-- Left Column: Instructor Information -->
        <div class="col-md-8">
            <!-- Instructor Information Card -->
            <div class="card mb-4">
                <div class="card-body instructor">
                    <h4 class="card-title">Instructor Information</h4>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <p><strong>Name:</strong> @Model.FirstName @Model.LastName</p>
                            <p><strong>Email:</strong> @Model.Email</p>
                            <p><strong>Address:</strong> @Model.Address</p>
                            <p><strong>Phone:</strong> @Model.Phone</p>
                            <p><strong>Enrollment Date:</strong> @Model.EnrollmentDate.ToShortDateString()</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Available Courses -->
        <div class="col-md-4 mb-4">
            <div class="card available-courses">
                <div class="card-body">
                    <h4 class="card-title mb-4">Available Courses</h4>

                    <!-- Available Courses List -->
                    <div class="available-courses-list">
                        @foreach (var course in Model.AvailableCourses)
                        {
                            <div class="card available-course mb-3">
                                <div class="card-body">
                                    <h4 class="card-title mb-3">@course.Name</h4>
                                    <form asp-action="AssignToCourse" asp-controller="Instructor" method="post">
                                        <input type="hidden" name="Id" value="@Model.Id" />
                                        <input type="hidden" name="courseId" value="@course.Id" />
                                        <button type="submit" class="btn btn-success">
                                            <i class="fas fa-plus"></i> Assign Course
                                        </button>
                                    </form>
                                </div>
                            </div>
                        }
                    </div>

                    <!-- Empty State (hidden by default) -->
                    <div class="empty-state" style="display: none">
                        <div class="empty-icon">📚</div>
                        <h5>No Courses Available</h5>
                        <p>Add new courses to get started</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Assigned Courses Card (Full Width Below) -->
        <div class="col-12 assigned-courses-container">
            <div class="card mb-4">
                <div class="card-body course-assigned">
                    <h4 class="card-title mb-4">Assigned Courses</h4>
                    <div class="row g-3">
                        @foreach (var course in Model.Courses)
                        {
                            <div class="card course-card col-md-4 mx-2">
                                <div class="card-body">
                                    <h4 class="card-title">@course.CourseName</h4>
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h6 class="card-subtitle text-body-secondary" style="font-weight: 700">
                                            <span class="student-count">@course.StudentCount Students</span>
                                        </h6>
                                    </div>
                                    <div class="d-flex flex-column gap-3">
                                        <div class="d-flex justify-content-between gap-2">
                                            <a asp-action="RemoveCourse" asp-controller="Instructor" asp-route-Id="@Model.Id" asp-route-CourseId="@course.CourseId" class="btn btn-danger flex-grow-1 col-sm-4">
                                                <i class="fas fa-trash"></i> Remove
                                            </a>
                                            <a asp-action="CourseInstructor" asp-controller="Student" asp-route-instructorId="@Model.Id" asp-route-CourseId="@course.CourseId" class="btn btn-primary flex-grow-1 col-sm-4">
                                                <i class="fas fa-users"></i> Students
                                            </a>
                                        </div>
                                        <div class="d-flex justify-content-between gap-2">
                                            <a asp-action="Index" asp-controller="QuestionBank" asp-route-Id="@Model.Id" asp-route-CourseId="@course.CourseId" class="btn btn-primary flex-grow-1 col-sm-4">
                                                <i class="fas fa-question-circle"></i> Questions
                                            </a>
                                            <a asp-action="Index" asp-controller="ExamModel" asp-route-Id="@Model.Id" asp-route-CourseId="@course.CourseId" class="btn btn-primary flex-grow-1 col-sm-4">
                                                <i class="fas fa-file-alt"></i> Exams
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>